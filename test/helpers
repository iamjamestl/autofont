#
# autofont -- Test Helpers
# Copyright (C) 2017 James T. Lee
#
# This software may be modified and distributed under the terms
# of the MIT license.  See the LICENSE file for details.
#
# Functions that may be useful in all of the test scripts.
#

configure() {
    autofont/configure --enable-test-results "$@"
    configure_status="$?"
    results_dir="$(dirname "$RESULTS")"
    [[ -d $results_dir ]] || mkdir -p "$results_dir"
    echo "CONFIGURE_STATUS='$configure_status'" >> "$RESULTS"
}

configure_with_build_deps() {
    fake_build_deps
    configure "$@"
}

configure_with_fixtures() {
    configure --with-font-srcdir=../../fixtures/Hack "$@"
}

configure_with_fixtures_and_build_deps() {
    fake_build_deps
    configure --with-font-srcdir=../../fixtures/Hack "$@"
}

fake_build_deps() {
    mkdir bin
    touch bin/fontmake bin/python
    chmod +x bin/fontmake bin/python
    export PATH="bin:${PATH}"
}

# vi: ft=sh
