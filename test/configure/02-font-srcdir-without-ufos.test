#
# Autofont -- Font Source Directory Without UFOs Test
# Copyright (C) 2017 James T. Lee
#
# This software may be modified and distributed under the terms
# of the MIT license.  See the LICENSE file for details.
#
# When a directory specified with the `--with-font-srcdir` configure argument
# does not contain UFOs, the HAVE_FONT_UFODIR automake conditional is set to
# false.
#

# Include a set of common test functions
source "$HELPERS"

# Establish expectations
expected_configure_notice="no UFO sources found; fonts will not be built"

# Perform the action under test
configure_with_fixtures_and_build_deps --with-font-ufodirname=this_does_not_exist

# Read the results
source "$RESULTS"

# Validate the expectations
[[ $HAVE_FONT_UFODIR_TRUE == '#' && $HAVE_FONT_UFODIR_FALSE = '' ]] &&
grep "$expected_configure_notice" config.log

# vi: ft=sh
